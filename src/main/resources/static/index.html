<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--百度收录验证-->
    <meta name="baidu-site-verification" content="Bv52S9d8YS"/>
    <!--http兼容https-->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"/>

    <title>微信小程序小游戏学习</title>
    <meta name="keywords" content="零基础入门微信小程序"/>
    <meta name="description" content="零基础入门微信小程序"/>

    <!-- 这里是通过@import引用CSS的样式内容 -->
    <style type="text/css">
        @import url(static/css/index.css);
    </style>
    <!--获取当前ip和城市-->
    <script src="http://pv.sohu.com/cityjson?ie=utf-8"></script>
    <!--ajax-->
    <script src="https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js">
    </script>

</head>
<body>
<h1>30天零基础实战入门小程序系列</h1>
<!--小程序自学文章列表-->
<div class="listArticle" id="muban">
    <ul id="ml"></ul>
</div>
<br><br>
<h1>小游戏，轻松一下</h1>
<div class="div2048">
    <img class="img" src="static/images/2048.png">
    <a class="a2048" href="static/2048/2048.html">2048小游戏</a>
</div>
<div class="div2048">
    <img class="img" src="static/images/shenjingmao.png">
    <a class="a2048" href="static/shenjingmao/shenjingmao.html">围住神经猫小游戏</a>
</div>
<div class="div2048">
    <img class="img" src="static/images/xiaoniao.png">
    <a class="a2048" href="static/xiaoniao/xiaoniao.html">像素小鸟小游戏</a>
</div>
<div class="div2048">
    <img class="img" src="static/images/shuxue.png">
    <a class="a2048" href="static/shuxue/shuxue.html">60秒趣味数学大比拼</a>
</div>

<!--请求数据-->
<script>
    var baseUrl = "";
    var ipstr = "" + returnCitySN['cip'] + returnCitySN['cname'];
    var pathname = window.location.pathname;
    if (window.location.hostname == "localhost") {
        baseUrl = "http://localhost:8080";
    } else {
        baseUrl = "http://30paotui.com";
    }
    $(document).ready(function () {
        $.ajax({
            url: baseUrl + "/pv/2048/add",
            type: "post",
            data: {"ip": ipstr, "path": pathname},
            success: function (result) {
                console.log("数据提交成功");
            }
        });

        //加载文章列表
        url = baseUrl + "/static/article/article.html?aid=";
        $.ajax({
            url: baseUrl + "/article/list",
            success: function (result) {
                console.log(result);
                var lists = result.data;
                for (var i = 0; i < lists.length; i++) {
                    console.log(lists[i].aid);
                    var aidurl = url + lists[i].aid;
                    console.log(aidurl);
                    var $ul = document.getElementById("ml");
                    //添加 li
                    var li = document.createElement("li");
                    var a = document.createElement("a");

                    //设置 li 属性，如 id
                    li.setAttribute("id", "newli");
                    a.innerHTML = lists[i].title;
                    a.href = aidurl;
                    li.appendChild(a);
                    $ul.appendChild(li);
                }
            }
        });
    });
    //    console.log(ipstr)
    //    alert(returnCitySN['cip'] + returnCitySN['cname']);

</script>

</body>
</html>